{"ast":null,"code":"var _jsxFileName = \"/Users/aleksandrandreev/bmstu_reports_system_web_app/src/components/register.component.tsx\";\nimport { Component } from \"react\";\nimport { Formik, Field, Form, ErrorMessage } from \"formik\";\nimport * as Yup from \"yup\";\nimport AuthService from \"../services/auth.service\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default class Register extends Component {\n  constructor(props) {\n    super(props);\n    this.handleRegister = this.handleRegister.bind(this);\n    this.state = {\n      username: \"\",\n      email: \"\",\n      password: \"\",\n      successful: false,\n      message: \"\"\n    };\n  }\n  validationSchema() {\n    return Yup.object().shape({\n      username: Yup.string().test(\"len\", \"The username must be between 3 and 20 characters.\", val => val && val.toString().length >= 3 && val.toString().length <= 20).required(\"This field is required!\"),\n      email: Yup.string().email(\"This is not a valid email.\").required(\"This field is required!\"),\n      password: Yup.string().test(\"len\", \"The password must be between 6 and 40 characters.\", val => val && val.toString().length >= 6 && val.toString().length <= 40).required(\"This field is required!\")\n    });\n  }\n  handleRegister(formValue) {\n    const {\n      username,\n      name,\n      email,\n      password\n    } = formValue;\n    this.setState({\n      message: \"\",\n      successful: false\n    });\n    AuthService.register(username, name, email, password).then(response => {\n      this.setState({\n        message: response.data.message,\n        successful: true\n      });\n    }, error => {\n      const resMessage = error.response && error.response.data && error.response.data.message || error.message || error.toString();\n      this.setState({\n        successful: false,\n        message: resMessage\n      });\n    });\n  }\n  render() {\n    const {\n      successful,\n      message\n    } = this.state;\n    const initialValues = {\n      username: \"\",\n      email: \"\",\n      password: \"\"\n    };\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"col-md-12\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"card card-container\",\n        children: [/*#__PURE__*/_jsxDEV(\"img\", {\n          src: \"//ssl.gstatic.com/accounts/ui/avatar_2x.png\",\n          alt: \"profile-img\",\n          className: \"profile-img-card\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 107,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Formik, {\n          initialValues: initialValues,\n          validationSchema: this.validationSchema,\n          onSubmit: this.handleRegister,\n          children: /*#__PURE__*/_jsxDEV(Form, {\n            children: [!successful && /*#__PURE__*/_jsxDEV(\"div\", {\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"form-group\",\n                children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                  htmlFor: \"username\",\n                  children: \" Username \"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 122,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(Field, {\n                  name: \"username\",\n                  type: \"text\",\n                  className: \"form-control\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 123,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(ErrorMessage, {\n                  name: \"username\",\n                  component: \"div\",\n                  className: \"alert alert-danger\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 124,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 121,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"form-group\",\n                children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                  htmlFor: \"name\",\n                  children: \" Name \"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 132,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(Field, {\n                  name: \"name\",\n                  type: \"text\",\n                  className: \"form-control\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 133,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(ErrorMessage, {\n                  name: \"name\",\n                  component: \"div\",\n                  className: \"alert alert-danger\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 134,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 131,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"form-group\",\n                children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                  htmlFor: \"email\",\n                  children: \" Email \"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 142,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(Field, {\n                  name: \"email\",\n                  type: \"email\",\n                  className: \"form-control\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 143,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(ErrorMessage, {\n                  name: \"email\",\n                  component: \"div\",\n                  className: \"alert alert-danger\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 144,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 141,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"form-group\",\n                children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                  htmlFor: \"password\",\n                  children: \" Password \"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 152,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(Field, {\n                  name: \"password\",\n                  type: \"password\",\n                  className: \"form-control\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 153,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(ErrorMessage, {\n                  name: \"password\",\n                  component: \"div\",\n                  className: \"alert alert-danger\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 158,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 151,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"form-group\",\n                children: /*#__PURE__*/_jsxDEV(\"button\", {\n                  type: \"submit\",\n                  className: \"btn btn-primary btn-block\",\n                  children: \"Sign Up\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 166,\n                  columnNumber: 21\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 165,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 120,\n              columnNumber: 17\n            }, this), message && /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"form-group\",\n              children: /*#__PURE__*/_jsxDEV(\"div\", {\n                className: successful ? \"alert alert-success\" : \"alert alert-danger\",\n                role: \"alert\",\n                children: message\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 173,\n                columnNumber: 19\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 172,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 118,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 113,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 106,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 105,\n      columnNumber: 7\n    }, this);\n  }\n}","map":{"version":3,"names":["Component","Formik","Field","Form","ErrorMessage","Yup","AuthService","Register","constructor","props","handleRegister","bind","state","username","email","password","successful","message","validationSchema","object","shape","string","test","val","toString","length","required","formValue","name","setState","register","then","response","data","error","resMessage","render","initialValues"],"sources":["/Users/aleksandrandreev/bmstu_reports_system_web_app/src/components/register.component.tsx"],"sourcesContent":["import { Component } from \"react\";\nimport { Formik, Field, Form, ErrorMessage } from \"formik\";\nimport * as Yup from \"yup\";\n\nimport AuthService from \"../services/auth.service\";\n\ntype Props = {};\n\ntype State = {\n  username: string,\n  email: string,\n  password: string,\n  successful: boolean,\n  message: string\n};\n\nexport default class Register extends Component<Props, State> {\n  constructor(props: Props) {\n    super(props);\n    this.handleRegister = this.handleRegister.bind(this);\n\n    this.state = {\n      username: \"\",\n      email: \"\",\n      password: \"\",\n      successful: false,\n      message: \"\"\n    };\n  }\n\n  validationSchema() {\n    return Yup.object().shape({\n      username: Yup.string()\n        .test(\n          \"len\",\n          \"The username must be between 3 and 20 characters.\",\n          (val: any) =>\n            val &&\n            val.toString().length >= 3 &&\n            val.toString().length <= 20\n        )\n        .required(\"This field is required!\"),\n      email: Yup.string()\n        .email(\"This is not a valid email.\")\n        .required(\"This field is required!\"),\n      password: Yup.string()\n        .test(\n          \"len\",\n          \"The password must be between 6 and 40 characters.\",\n          (val: any) =>\n            val &&\n            val.toString().length >= 6 &&\n            val.toString().length <= 40\n        )\n        .required(\"This field is required!\"),\n    });\n  }\n\n  handleRegister(formValue: { username: string; name: string; email: string; password: string }) {\n    const { username, name, email, password } = formValue;\n\n    this.setState({\n      message: \"\",\n      successful: false\n    });\n\n    AuthService.register(\n      username,\n      name,\n      email,\n      password\n    ).then(\n      response => {\n        this.setState({\n          message: response.data.message,\n          successful: true\n        });\n      },\n      error => {\n        const resMessage =\n          (error.response &&\n            error.response.data &&\n            error.response.data.message) ||\n          error.message ||\n          error.toString();\n\n        this.setState({\n          successful: false,\n          message: resMessage\n        });\n      }\n    );\n  }\n\n  render() {\n    const { successful, message } = this.state;\n\n    const initialValues = {\n      username: \"\",\n      email: \"\",\n      password: \"\",\n    };\n\n    return (\n      <div className=\"col-md-12\">\n        <div className=\"card card-container\">\n          <img\n            src=\"//ssl.gstatic.com/accounts/ui/avatar_2x.png\"\n            alt=\"profile-img\"\n            className=\"profile-img-card\"\n          />\n\n          <Formik\n            initialValues={initialValues}\n            validationSchema={this.validationSchema}\n            onSubmit={this.handleRegister}\n          >\n            <Form>\n              {!successful && (\n                <div>\n                  <div className=\"form-group\">\n                    <label htmlFor=\"username\"> Username </label>\n                    <Field name=\"username\" type=\"text\" className=\"form-control\" />\n                    <ErrorMessage\n                      name=\"username\"\n                      component=\"div\"\n                      className=\"alert alert-danger\"\n                    />\n                  </div>\n\n                  <div className=\"form-group\">\n                    <label htmlFor=\"name\"> Name </label>\n                    <Field name=\"name\" type=\"text\" className=\"form-control\" />\n                    <ErrorMessage\n                        name=\"name\"\n                        component=\"div\"\n                        className=\"alert alert-danger\"\n                    />\n                  </div>\n\n                  <div className=\"form-group\">\n                    <label htmlFor=\"email\"> Email </label>\n                    <Field name=\"email\" type=\"email\" className=\"form-control\" />\n                    <ErrorMessage\n                      name=\"email\"\n                      component=\"div\"\n                      className=\"alert alert-danger\"\n                    />\n                  </div>\n\n                  <div className=\"form-group\">\n                    <label htmlFor=\"password\"> Password </label>\n                    <Field\n                      name=\"password\"\n                      type=\"password\"\n                      className=\"form-control\"\n                    />\n                    <ErrorMessage\n                      name=\"password\"\n                      component=\"div\"\n                      className=\"alert alert-danger\"\n                    />\n                  </div>\n\n                  <div className=\"form-group\">\n                    <button type=\"submit\" className=\"btn btn-primary btn-block\">Sign Up</button>\n                  </div>\n                </div>\n              )}\n\n              {message && (\n                <div className=\"form-group\">\n                  <div\n                    className={\n                      successful ? \"alert alert-success\" : \"alert alert-danger\"\n                    }\n                    role=\"alert\"\n                  >\n                    {message}\n                  </div>\n                </div>\n              )}\n            </Form>\n          </Formik>\n        </div>\n      </div>\n    );\n  }\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}